<!doctype html>
<html lang="en">
  <head>
		
		<!-- Webpage Title -->
    <title>기획서(레이아웃)</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  
		
		<!-- JS -->		
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    
    <!-- 구글폰트 -->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR&display=swap" rel="stylesheet">

	<script>
		$(document).ready(function(){
			$('#order-submit-list').empty();
			listing();
		});

		function order_click() {
			let item = '그림액자';
			let name = $('#order-name').val();
			let count = $('#order-count').val();
			let address = $('#order-address').val();
			let phone = $('#order-phone').val();

			$.ajax({
			  type: "POST",
			  url: "http://spartacodingclub.shop/order",
			  data: { name_give:name, count_give:count, address_give:address, phone_give:phone, item_give:item },
			  success: function(response){
					alert('주문이 정상적으로 완료되었습니다.');
					location.reload();
			  }
			})
			
		}

		function listing(){
			$.ajax({
			  type: "GET",
			  url: "http://spartacodingclub.shop/order?item_give=그림액자",
			  data: {},
			  success: function(response){
			    if (response['result'] == 'success'){
			    	let orders = (response['orders'])
			    	for (let i = 0; i < orders.length; i++){
			    		let order = orders[i];
			    		make_order(order['address'], order['count'], order['item'], order['name'], order['phone'])
			    	}
			    }
			  }
			})
		}

		function make_order(address, count, item, name, phone){
			let temp_html = '<tr>\
		      <th scope="row">'+item+'</th>\
		      <td>'+name+'</td>\
		      <td>'+count+'</td>\
		      <td>'+address+'</td>\
		      <td>'+phone+'</td>\
		    </tr>'
			$('#order-submit-list').append(temp_html);
		}
		
	</script>

	<!-- style -->
    <style>
    	* {
			font-family: 'Noto Sans KR', sans-serif;
		}
    	.wrap {
    		    width: 900px;
    			margin: auto;
    	}
    	.comment {
		    color: blue;
		    font-weight: bold;
		}
		.form-board {
			width: 500px;
		    padding: 2rem;
		    margin: 2rem auto;
		    border-color: #e9ecef;
		    border-radius: 0.3rem;
		    border: solid;
		    display: block;
		}
		.main-image {
			width: 900px;
			margin: 50px auto;
		}
		.title h2,
    	.title h4 {
      		display: inline;
      		padding-right: 50px;
    	}
    	.prodcut-summary {
    		width: 900px;
    		margin: 50px auto;
    	}
    	.product-comment {
    	  display: -webkit-box; 
    	  display: -ms-flexbox; 
    	  display: box; 
    	  margin-top:1px; 
    	  max-height:80px; 
    	  overflow:hidden; 
    	  vertical-align:top; 
    	  text-overflow: ellipsis; 
    	  word-break:break-all; 
    	  -webkit-box-orient:vertical; 
    	  -webkit-line-clamp:2
		}
		.col-form-label {
			margin: 5px auto;
		}
		.order-list {
			width: 900px;
			margin: 50px auto;
		}
		.order-submit {
			width: 400px;
			margin: 50px auto;
		}
		.btn {
			width: 400px;
			margin: auto;
		}
		
    </style>
  </head>
  <body>
   <!-- 상품 이미지 -->
   <div class="wrap">
	   <div id="carouselExampleIndicators" class="carousel slide main-image" data-ride="carousel">
		  <ol class="carousel-indicators">
		    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
		    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
		    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
		  </ol>
		  <div class="carousel-inner">
		    <div class="carousel-item active">
		      <img class="d-block w-100" src="http://thumbnail12.coupangcdn.com/thumbnails/remote/492x492ex/image/vendor_inventory/images/2019/03/21/13/9/0284eeef-a775-4e03-9e40-27ce961d6f70.jpg" alt="First slide">
		    </div>
		    <div class="carousel-item">
		      <img class="d-block w-100" src="http://thumbnail15.coupangcdn.com/thumbnails/remote/492x492ex/image/vendor_inventory/images/2019/03/21/13/4/d1bb8f05-47e7-49cd-b124-35a3e848073d.jpg" alt="Second slide">
		    </div>
		    <div class="carousel-item">
		      <img class="d-block w-100" src="http://thumbnail11.coupangcdn.com/thumbnails/remote/492x492ex/image/vendor_inventory/images/2019/03/21/13/9/078f27d6-339d-4815-9445-e2e1bfb16bdf.jpg" alt="Third slide">
		    </div>
		  </div>
		  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
		    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
		    <span class="sr-only">Previous</span>
		  </a>
		  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
		    <span class="carousel-control-next-icon" aria-hidden="true"></span>
		    <span class="sr-only">Next</span>
		  </a>
		</div>

		<!-- 상품 제목/가격/설명 -->
		<div class="prodcut-summary">
			<div class="title">
			 <h2 id="product-name">어린왕자 일러스트 그림액자</h2>
			 <h4>가격: 149,000/개</h4>
			</div>
			 <p class="product-comment">포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.포근하고 아름다운 색체와 입체감으로 인테리어 액자로 유명한 일러스트 그림입니다.
			 </p>
		</div>
		<!-- 상품 주문하기 -->
		<div class="order-list">
		 <div>
			 <form>
			  <div class="form-group row">
			    <label for="inputEmail3" class="col-sm-2 col-form-label">주문자 성함:</label>
			    <div class="col-sm-10">
			      <input type="text" id="order-name" class="form-control" placeholder="">
			    </div>
			    <label for="inputEmail3" class="col-sm-2 col-form-label">수량:</label>
			    <div class="col-sm-10">
			      <select class="form-control" id="order-count" placeholder="">
			      	<option value="" selected disabled hidden>수량을 입력해주세요.</option>
			      	<option>1</option>
			        <option>2</option>
			        <option>3</option>
			        <option>4</option>
			        <option>5</option>
			      </select>
			    </div>
			    <label for="inputEmail3" class="col-sm-2 col-form-label">주소:</label>
			    <div class="col-sm-10">
			      <input type="text" id="order-address" class="form-control" placeholder="">
			    </div>
			    <label for="inputEmail3" class="col-sm-2 col-form-label">전화번호:</label>
			    <div class="col-sm-10">
			      <input type="tel" id="order-phone" class="form-control" pattern="(010)-\d{3,4}-\d{4}" placeholder="">
			    </div>
			  </div>	
			 </form>
		 </div>
		</div>

		<!-- 주문하기 제출 -->
		<div class="order-submit">
		 <button onclick="order_click()" type="button" class="btn btn-info">주문하기</button>
		</div>
		<table class="table table-hover">
		  <thead>
		    <tr>
		      <th scope="col">상품명</th>
		      <th scope="col">이름</th>
		      <th scope="col">수량</th>
		      <th scope="col">주소</th>
		      <th scope="col">전화번호</th>
		    </tr>
		  </thead>
		  <tbody id="order-submit-list">
		    <tr>
		      <th scope="row">상품명 1</th>
		      <td>이름 1</td>
		      <td>수량 1</td>
		      <td>주소 1</td>
		      <td>전화번호 1</td>
		    </tr>
		    <tr>
		      <th scope="row">상품명 1</th>
		      <td>이름 2</td>
		      <td>수량 2</td>
		      <td>주소 2</td>
		      <td>전화번호 2</td>
		    </tr>
		    <tr>
		      <th scope="row">상품명 1</th>
		      <td>이름 3</td>
		      <td>수량 3</td>
		      <td>주소 3</td>
		      <td>전화번호 3</td>
		    </tr>
		  </tbody>
		</table>
	</div>
  </body>
</html>